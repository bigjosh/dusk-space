<!DOCTYPE html><html><head>
  <script src="p5.min.js"></script>
  <script src="p5.dom.min.js"></script>
  <script src="p5.sound.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="style.css">
  <meta charset="utf-8">

</head>

<body>


   <script src="dist/NoSleep.js"></script>
  
  <div id="title" class="headline">
    <h1>dusk.space</h1>
  </div>
  
  <div>
    <script src="sketch.js"></script>
  </div>
  
	<button class="button" id="toggle">Hear more</button>
    
    <!-- This super helpfull random audio code from https://stackoverflow.com/a/37635401/3152071 -->
    
    <audio id="audioplayer"> <!-- Remove the "Controls" Attribute if you don't want the visual controls -->
    </audio>

    <script>
        var selection = null;
        var playlist = ["sounds/0.mp3", "sounds/1.mp3", "sounds/2.mp3" , "sounds/3.mp3", "sounds/4.mp3", "sounds/5.mp3"  ]; // List of Songs
        var player = document.getElementById("audioplayer"); // Get Audio Element
        // player.autoplay=true;
        player.addEventListener("ended", nextSound ); // Run function when song ends
        

        function selectRandom(){
            selection = Math.floor(Math.random() * playlist.length);
            player.src = playlist[selection]; // Tell HTML the location of the new Song

        }
        
        function nextSound(){
            selectRandom(); // Select initial song
            player.play();

        }
        

        selectRandom(); // Select initial song
        
    </script>    
    
    <!-- Nosleep keeps phone from going to sleep while sounds are playing -->
    <!-- https://github.com/richtr/NoSleep.js -->
	
    <script>
      var noSleep = new NoSleep();
      var wakeLockEnabled = false;
      var toggleEl = document.querySelector("#toggle");
      toggleEl.addEventListener('click', function() {
        if (!wakeLockEnabled) {
          noSleep.enable(); // keep the screen on!
          wakeLockEnabled = true;
          toggleEl.innerText  = "Hear Less";
          <!-- document.body.style.backgroundColor = "green";-->
          player.play(); // Start Song
          
        } else {
          noSleep.disable(); // let the screen turn off.
          wakeLockEnabled = false;
          toggleEl.innerText  = "Hear More";
          <!--document.body.style.backgroundColor = "";-->
          player.pause(); // Stop Song
          
        }
      }, false);
    </script>

</body></html>